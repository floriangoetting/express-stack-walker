var g={Action:"action",Config:"config",Consent:"consent",Context:"context",Destination:"destination",Elb:"elb",Globals:"globals",Hook:"hook",Init:"init",Link:"link",Prefix:"data-elb",Run:"run",User:"user",Walker:"walker"},S={Cookie:"cookie",Local:"local",Session:"session"},k={Storage:S},t={Commands:g,Utils:k};function l(e){if(e==="true")return!0;if(e==="false")return!1;let r=Number(e);return e==r&&e!==""?r:String(e)}function m(e,r=t.Utils.Storage.Session){switch(r){case t.Utils.Storage.Cookie:p(e,"",0,r);break;case t.Utils.Storage.Local:window.localStorage.removeItem(e);break;case t.Utils.Storage.Session:window.sessionStorage.removeItem(e);break}}function d(e,r=t.Utils.Storage.Session){var u;function s(i){try{return JSON.parse(i||"")}catch(c){let a=1,f="";return i&&(a=0,f=i),{e:a,v:f}}}let o,n;switch(r){case t.Utils.Storage.Cookie:o=decodeURIComponent(((u=document.cookie.split("; ").find(i=>i.startsWith(e+"=")))==null?void 0:u.split("=")[1])||"");break;case t.Utils.Storage.Local:n=s(window.localStorage.getItem(e));break;case t.Utils.Storage.Session:n=s(window.sessionStorage.getItem(e));break}return n&&(o=n.v,n.e!=0&&n.e<Date.now()&&(m(e,r),o="")),l(o||"")}function p(e,r,s=30,o=t.Utils.Storage.Session,n){let i={e:Date.now()+6e4*s,v:String(r)},c=JSON.stringify(i);switch(o){case t.Utils.Storage.Cookie:let a=`${e}=${encodeURIComponent(r)}; max-age=${s*60}; path=/; SameSite=Lax; secure`;n&&(a+="; domain="+n),document.cookie=a;break;case t.Utils.Storage.Local:window.localStorage.setItem(e,c);break;case t.Utils.Storage.Session:window.sessionStorage.setItem(e,c);break}return d(e,o)}export{m as storageDelete,d as storageRead,p as storageWrite};

"use strict";var f=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var R=(e,t)=>{for(var n in t)f(e,n,{get:t[n],enumerable:!0})},O=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of h(t))!b.call(e,r)&&r!==n&&f(e,r,{get:()=>t[r],enumerable:!(o=P(t,r))||o.enumerable});return e};var U=e=>O(f({},"__esModule",{value:!0}),e);var I={};R(I,{getAttribute:()=>y,isVisible:()=>x,sessionStart:()=>w,storageDelete:()=>g,storageRead:()=>S,storageWrite:()=>k});module.exports=U(I);function y(e,t){return e.getAttribute(t)||""}function x(e){let t=getComputedStyle(e);if(t.display==="none"||t.visibility!=="visible"||t.opacity&&Number(t.opacity)<.1)return!1;let n,o=window.innerHeight,r=e.getBoundingClientRect(),s=r.height,i=r.y,c=i+s,u={x:r.x+e.offsetWidth/2,y:r.y+e.offsetHeight/2};if(s<=o){if(e.offsetWidth+r.width===0||e.offsetHeight+r.height===0||u.x<0||u.x>(document.documentElement.clientWidth||window.innerWidth)||u.y<0||u.y>(document.documentElement.clientHeight||window.innerHeight))return!1;n=document.elementFromPoint(u.x,u.y)}else{let l=o/2;if(i<0&&c<l||c>o&&i>l)return!1;n=document.elementFromPoint(u.x,o/2)}if(n)do if(n===e)return!0;while(n=n.parentElement);return!1}var W={Action:"action",Config:"config",Consent:"consent",Context:"context",Destination:"destination",Elb:"elb",Globals:"globals",Hook:"hook",Init:"init",Link:"link",Prefix:"data-elb",Run:"run",User:"user",Walker:"walker"},T={Cookie:"cookie",Local:"local",Session:"session"},C={Storage:T},a={Commands:W,Utils:C};function m(e){if(e==="true")return!0;if(e==="false")return!1;let t=Number(e);return e==t&&e!==""?t:String(e)}function d(e=6){for(var t="",n=36;t.length<e;)t+=(Math.random()*n|0).toString(n);return t}function p(e,t={}){let n={},o=Object.assign({utm_campaign:"campaign",utm_content:"content",dclid:"clickId",fbclid:"clickId",gclid:"clickId",utm_medium:"medium",msclkid:"clickId",utm_source:"source",utm_term:"term"},t);return Object.entries(o).forEach(([r,s])=>{let i=e.searchParams.get(r);i&&(n[s]=i)}),n}function w(e={}){let t=e.isNew||!1;if(!t){let[c]=performance.getEntriesByType("navigation");if(c.type!=="navigate")return!1}let n=new URL(e.url||window.location.href),o=e.referrer||document.referrer,r=o&&new URL(o).hostname,s={},i=p(n,e.parameters);if(Object.keys(i).length&&(s.marketing=!0,t=!0),!t){let c=e.domains||[];c.push(n.hostname),t=!c.includes(r)}return t?(r&&(s.referrer=r),Object.assign(s,{id:s.id||d(12)},i,e.data),s):!1}function g(e,t=a.Utils.Storage.Session){switch(t){case a.Utils.Storage.Cookie:k(e,"",0,t);break;case a.Utils.Storage.Local:window.localStorage.removeItem(e);break;case a.Utils.Storage.Session:window.sessionStorage.removeItem(e);break}}function S(e,t=a.Utils.Storage.Session){var s;function n(i){try{return JSON.parse(i||"")}catch(c){let u=1,l="";return i&&(u=0,l=i),{e:u,v:l}}}let o,r;switch(t){case a.Utils.Storage.Cookie:o=decodeURIComponent(((s=document.cookie.split("; ").find(i=>i.startsWith(e+"=")))==null?void 0:s.split("=")[1])||"");break;case a.Utils.Storage.Local:r=n(window.localStorage.getItem(e));break;case a.Utils.Storage.Session:r=n(window.sessionStorage.getItem(e));break}return r&&(o=r.v,r.e!=0&&r.e<Date.now()&&(g(e,t),o="")),m(o||"")}function k(e,t,n=30,o=a.Utils.Storage.Session,r){let i={e:Date.now()+6e4*n,v:String(t)},c=JSON.stringify(i);switch(o){case a.Utils.Storage.Cookie:let u=`${e}=${encodeURIComponent(t)}; max-age=${n*60}; path=/; SameSite=Lax; secure`;r&&(u+="; domain="+r),document.cookie=u;break;case a.Utils.Storage.Local:window.localStorage.setItem(e,c);break;case a.Utils.Storage.Session:window.sessionStorage.setItem(e,c);break}return S(e,o)}0&&(module.exports={getAttribute,isVisible,sessionStart,storageDelete,storageRead,storageWrite});

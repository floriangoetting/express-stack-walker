"use strict";function e(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e){if(Array.isArray(e))return e}function n(t){if(Array.isArray(t))return e(t)}function r(e,t,n,r,i,o,a){try{var u=e[o](a);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,i)}}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,c,"next",e)}function c(e){r(a,i,o,u,c,"throw",e)}u(undefined)})}}function o(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function a(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function u(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c(e,t){var n=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;var r=[];var i=true;var o=false;var a,u;try{for(n=n.call(e);!(i=(a=n.next()).done);i=true){r.push(a.value);if(t&&r.length===t)break}}catch(e){o=true;u=e}finally{try{if(!i&&n["return"]!=null)n["return"]()}finally{if(o)throw u}}return r}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(t){o(e,t,n[t])})}return e}function d(e,n){return t(e)||c(e,n)||m(e,n)||l()}function v(e){return n(e)||u(e)||m(e)||s()}function y(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function m(t,n){if(!t)return;if(typeof t==="string")return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}function g(e,t){var n,r,i,o,a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),"throw":u(1),"return":u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=o[0]&2?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;if(r=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:false};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){a=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(o[0]===6&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}if(i[2])a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}var Utils=function(){var e=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.entries(t).forEach(function(n){var r=d(n,2),i=r[0],o=r[1];var a=e[i];Array.isArray(a)&&Array.isArray(o)&&(t[i]=o.reduce(function(e,t){return e.includes(t)?e:v(e).concat([t])},v(a)))}),f({},e,t)};var t=function e(e){if(e==="true")return!0;if(e==="false")return!1;var t=Number(e);return e==t&&e!==""?t:String(e)};var n=function e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t.split(".").reduce(function(e,t){if(t=="*"&&(t=String(n)),a(e,Object))return e[t]},e)};var r=function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;for(var t="",n=36;t.length<e;)t+=(Math.random()*n|0).toString(n);return t};var o=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n={},r=Object.assign({utm_campaign:"campaign",utm_content:"content",dclid:"clickId",fbclid:"clickId",gclid:"clickId",utm_medium:"medium",msclkid:"clickId",utm_source:"source",utm_term:"term"},t);return Object.entries(r).forEach(function(t){var r=d(t,2),i=r[0],o=r[1];var a=e.searchParams.get(i);a&&(n[o]=a)}),n};var u=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++){i[o]=arguments[o]}return clearTimeout(n),new Promise(function(r){n=setTimeout(function(){r(e.apply(void 0,v(i)))},t)})}};var c=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;var n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++){i[o]=arguments[o]}if(n===null)return n=setTimeout(function(){n=null},t),e.apply(void 0,v(i))}};var l=function e(e,t){return(typeof e==="undefined"?"undefined":y(e))==(typeof t==="undefined"?"undefined":y(t))};var s=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t&&console.dir(e,{depth:4})};var m=function e(e){throw new Error(String(e))};var h=function e(e){return e?e.trim().replace(/^'|'$/g,"").trim():""};var p=function e(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}try{return e.apply(void 0,v(r))}catch(e){return t?t(e):void 0}}};var b=function e(e,t){return i(function(){var n,r,i,o,a;var u=arguments;return g(this,function(c){switch(c.label){case 0:for(n=u.length,r=new Array(n),i=0;i<n;i++){r[i]=u[i]}c.label=1;case 1:c.trys.push([1,3,,7]);return[4,e.apply(void 0,v(r))];case 2:return[2,c.sent()];case 3:o=c.sent();if(!t)return[3,5];return[4,t(o)];case 4:a=c.sent();return[3,6];case 5:a=void 0;c.label=6;case 6:return[2,a];case 7:return[2]}})})};var w=function e(e,t,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++){i[o]=arguments[o]}var a,u="pre"+t,c="post"+t,l=n[u],s=n[c];return l?a=l.apply(void 0,[{fn:e}].concat(v(i))):a=e.apply(void 0,v(i)),s&&(a=s.apply(void 0,[{fn:e,result:a}].concat(v(i)))),a}};var S=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];l(e,{})||m("Invalid object");var n,r,i;var o;l(e.event,"")?(n=e.event,o=d(n.split(" "),2),r=o[0],i=o[1],o,(!r||!i)&&m("Invalid event name")):l(e.entity,"")&&l(e.action,"")?(r=e.entity,i=e.action,n="".concat(r," ").concat(i)):m("Missing or invalid event, entity, or action");var a={"*":{"*":{event:{maxLength:255},user:{allowedKeys:["id","device","session"]},consent:{allowedValues:[!0,!1]},timestamp:{min:0},timing:{min:0},count:{min:0},version:{allowedKeys:["client","tagging"]},source:{allowedKeys:["type","id","previous_id"]}}}},u={event:n,data:{},context:{},custom:{},globals:{},user:{},nested:[],consent:{},id:"",trigger:"",entity:r,action:i,timestamp:0,timing:0,group:"",count:0,version:{client:"",tagging:0},source:{type:"",id:"",previous_id:""}};return[a].concat(t).reduce(function(e,t){return["*",r].reduce(function(e,n){return["*",i].reduce(function(e,r){var i;var o=(i=t[n])===null||i===void 0?void 0:i[r];return o?e.concat([o]):e},e)},e)},[]).reduce(function(t,n){var r=Object.keys(n).filter(function(e){var t;return((t=n[e])===null||t===void 0?void 0:t.required)===!0});return v(Object.keys(e)).concat(v(r)).reduce(function(t,r){var i=n[r],o=e[r];return i&&(o=p(M,function(e){m(String(e))})(t,r,o,i)),l(o,t[r])&&(t[r]=o),t},t)},u)};var k=function e(e,t){return e.getAttribute(t)||""};var x=function e(e){var t=getComputedStyle(e);if(t.display==="none"||t.visibility!=="visible"||t.opacity&&Number(t.opacity)<.1)return!1;var n,r=window.innerHeight,i=e.getBoundingClientRect(),o=i.height,a=i.y,u=a+o,c={x:i.x+e.offsetWidth/2,y:i.y+e.offsetHeight/2};if(o<=r){if(e.offsetWidth+i.width===0||e.offsetHeight+i.height===0||c.x<0||c.x>(document.documentElement.clientWidth||window.innerWidth)||c.y<0||c.y>(document.documentElement.clientHeight||window.innerHeight))return!1;n=document.elementFromPoint(c.x,c.y)}else{var l=r/2;if(a<0&&u<l||u>r&&a>l)return!1;n=document.elementFromPoint(c.x,r/2)}if(n)do if(n===e)return!0;while(n=n.parentElement);return!1};var O=function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var t=e.isNew||!1;if(!t){var n=d(performance.getEntriesByType("navigation"),1),i=n[0];if(i.type!=="navigate")return!1}var a=new URL(e.url||window.location.href),u=e.referrer||document.referrer,c=u&&new URL(u).hostname,l={},s=o(a,e.parameters);if(Object.keys(s).length&&(l.marketing=!0,t=!0),!t){var f=e.domains||[];f.push(a.hostname),t=!f.includes(c)}return t?(c&&(l.referrer=c),Object.assign(l,{id:l.id||r(12)},s,e.data),l):!1};var j=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.Utils.Storage.Session;switch(t){case K.Utils.Storage.Cookie:A(e,"",0,t);break;case K.Utils.Storage.Local:window.localStorage.removeItem(e);break;case K.Utils.Storage.Session:window.sessionStorage.removeItem(e);break}};var I=function e(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.Utils.Storage.Session;function r(e){try{return JSON.parse(e||"")}catch(r){var t=1,n="";return e&&(t=0,n=e),{e:t,v:n}}}var i,o;switch(n){case K.Utils.Storage.Cookie:var a;i=decodeURIComponent(((a=document.cookie.split("; ").find(function(t){return t.startsWith(e+"=")}))===null||a===void 0?void 0:a.split("=")[1])||"");break;case K.Utils.Storage.Local:o=r(window.localStorage.getItem(e));break;case K.Utils.Storage.Session:o=r(window.sessionStorage.getItem(e));break}return o&&(i=o.v,o.e!=0&&o.e<Date.now()&&(j(e,n),i="")),t(i||"")};var A=function e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:30,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:K.Utils.Storage.Session,i=arguments.length>4?arguments[4]:void 0;var o={e:Date.now()+6e4*n,v:String(t)},a=JSON.stringify(o);switch(r){case K.Utils.Storage.Cookie:var u="".concat(e,"=").concat(encodeURIComponent(t),"; max-age=").concat(n*60,"; path=/; SameSite=Lax; secure");i&&(u+="; domain="+i),document.cookie=u;break;case K.Utils.Storage.Local:window.localStorage.setItem(e,a);break;case K.Utils.Storage.Session:window.sessionStorage.setItem(e,a);break}return I(e,r)};var U=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var L=function(e,t){for(var n in t)U(e,n,{get:t[n],enumerable:!0})},T=function(e,t,n,r){var i=true,o=false,a=undefined;if(t&&typeof t=="object"||typeof t=="function")try{var u=function(){var i=l.value;!E.call(e,i)&&i!==n&&U(e,i,{get:function(){return t[i]},enumerable:!(r=P(t,i))||r.enumerable})};for(var c=C(t)[Symbol.iterator](),l;!(i=(l=c.next()).done);i=true)u()}catch(e){o=true;a=e}finally{try{if(!i&&c.return!=null){c.return()}}finally{if(o){throw a}}}return e};var _=function(e){return T(U({},"__esModule",{value:!0}),e)};var D={};L(D,{Const:function(){return K},assign:function(){return e},castValue:function(){return t},debounce:function(){return u},getAttribute:function(){return k},getByStringDot:function(){return n},getId:function(){return r},getMarketingParameters:function(){return o},isSameType:function(){return l},isVisible:function(){return x},onLog:function(){return s},sessionStart:function(){return O},storageDelete:function(){return j},storageRead:function(){return I},storageWrite:function(){return A},throttle:function(){return c},throwError:function(){return m},trim:function(){return h},tryCatch:function(){return p},tryCatchAsync:function(){return b},useHooks:function(){return w},validateEvent:function(){return S},validateProperty:function(){return M}});var H={Action:"action",Config:"config",Consent:"consent",Context:"context",Destination:"destination",Elb:"elb",Globals:"globals",Hook:"hook",Init:"init",Link:"link",Prefix:"data-elb",Run:"run",User:"user",Walker:"walker"},R={Cookie:"cookie",Local:"local",Session:"session"},W={Storage:R},K={Commands:H,Utils:W};function M(e,t,n,r){if(r.validate&&(n=p(r.validate,function(e){m(String(e))})(n,t,e)),r.required&&n===void 0&&m("Missing required property"),l(n,""))r.maxLength&&n.length>r.maxLength&&(r.strict&&m("Value exceeds maxLength"),n=n.substring(0,r.maxLength));else if(l(n,1))l(r.min,1)&&n<r.min?(r.strict&&m("Value below min"),n=r.min):l(r.max,1)&&n>r.max&&(r.strict&&m("Value exceeds max"),n=r.max);else if(l(n,{})){if(r.schema){var i=r.schema;Object.keys(i).reduce(function(e,t){var n=i[t],r=e[t];return n&&(n.type&&(typeof r==="undefined"?"undefined":y(r))!==n.type&&m("Type doesn't match (".concat(t,")")),r=p(M,function(e){m(String(e))})(e,t,r,n)),r},n)}var o=true,a=false,u=undefined;try{for(var c=Object.entries(n)[Symbol.iterator](),s;!(o=(s=c.next()).done);o=true){var f=d(s.value,2),v=f[0],g=f[1];r.allowedKeys&&!r.allowedKeys.includes(v)&&(r.strict&&m("Key not allowed"),delete n[v])}}catch(e){a=true;u=e}finally{try{if(!o&&c.return!=null){c.return()}}finally{if(a){throw u}}}}return n}return _(D)}();